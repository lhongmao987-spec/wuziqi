<view class="page">
  <view class="hero">
    <view class="badge">微信小程序 · 五子棋</view>
    <view class="title">随时来一局</view>
    <view class="subtitle">选择模式即可开始对弈，AI 难度与计时规则随心配。</view>
  </view>

  <view class="card">
    <view class="card-header">
      <view class="card-title">快速开始</view>
      <view class="card-desc">本机双人/人机对局一键启动</view>
    </view>
    <view class="mode-grid">
      <view
        class="mode-tile {{selectedMode === GameMode.PVE ? 'active' : ''}}"
        bindtap="selectPve"
      >
        <view class="mode-title">人机对战</view>
        <view class="mode-tip">三档难度可选</view>
        <view class="chips">
          <block wx:for="{{aiLevels}}" wx:key="value">
            <view
              class="chip {{selectedAiLevel === item.value ? 'chip-active' : ''}}"
              data-value="{{item.value}}"
              bindtap="selectAi"
            >
              {{item.label}}
            </view>
          </block>
        </view>
      </view>
      <view
        class="mode-tile {{selectedMode === GameMode.PVP_LOCAL ? 'active' : ''}}"
        bindtap="selectPvp"
      >
        <view class="mode-title">本机对战</view>
        <view class="mode-tip">同屏双人轮流落子</view>
        <view class="chip chip-line">15×15 经典棋盘</view>
      </view>
    </view>
    <view class="controls">
      <button class="primary" bindtap="startGame">开始对局</button>
    </view>
  </view>

  <view class="card invite-card">
    <view class="card-header">
      <view class="card-title">在线对战</view>
      <view class="card-desc">创建房间或输入房间号加入对战</view>
    </view>
    <view class="controls">
      <button class="invite-btn" bindtap="createRoom">
        <text class="invite-icon">🏠</text>
        <text>创建房间</text>
      </button>
      <button class="invite-btn secondary" bindtap="showJoinRoomModal">
        <text class="invite-icon">🔢</text>
        <text>加入房间</text>
      </button>
    </view>
  </view>

  <!-- 加入房间弹窗 -->
  <view wx:if="{{showJoinModal}}" class="modal-overlay" bindtap="hideJoinRoomModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <view class="modal-title">输入房间号</view>
        <view class="modal-close" bindtap="hideJoinRoomModal">×</view>
      </view>
      <view class="modal-body">
        <input 
          class="room-input" 
          type="number" 
          placeholder="请输入4位房间号"
          maxlength="4"
          value="{{roomIdInput}}"
          bindinput="onRoomIdInput"
        />
      </view>
      <view class="modal-footer">
        <button class="modal-btn cancel" bindtap="hideJoinRoomModal">取消</button>
        <button class="modal-btn confirm" bindtap="joinRoom">加入</button>
      </view>
    </view>
  </view>
</view>
