<view class="page">
  <view class="card">
    <view class="title">对局设置</view>
    <view class="item">
      <view class="left">
        <view class="name">禁手规则</view>
        <view class="sub">标准规则下默认关闭</view>
      </view>
      <switch checked="{{toggles.enableForbidden}}" data-key="enableForbidden" bindchange="onSwitchChange" />
    </view>
    <view class="item">
      <view class="left">
        <view class="name">落子高亮</view>
        <view class="sub">提示最近一步位置</view>
      </view>
      <switch checked="{{toggles.highlight}}" data-key="highlight" bindchange="onSwitchChange" />
    </view>
    <view class="item">
      <view class="left">
        <view class="name">音效</view>
        <view class="sub">落子与胜负提示音</view>
      </view>
      <switch checked="{{toggles.sound}}" data-key="sound" bindchange="onSwitchChange" />
    </view>
  </view>

  <view class="card">
    <view class="title">游戏规则</view>
    <view class="rules-container">
      <view class="rule-section" wx:for="{{ruleSections}}" wx:key="title">
        <view class="rule-header" bindtap="toggleRule" data-index="{{index}}">
          <view class="rule-title">{{item.title}}</view>
          <view class="rule-icon {{item.expanded ? 'expanded' : ''}}">▼</view>
        </view>
        <view class="rule-content {{item.expanded ? 'expanded' : ''}}">
          <view class="rule-text" wx:for="{{item.items}}" wx:key="*this" wx:for-item="ruleItem">
            <text class="rule-bullet">•</text>
            <text class="rule-item">{{ruleItem}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
